<Window x:Class="shahmati.Views.OnlineGamesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Онлайн игры" Height="600" Width="800"
        WindowStartupLocation="CenterScreen"
        Background="#2F4F4F">

    <Window.Resources>
        <Style x:Key="RoundedButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#8B4513"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="GreenButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="35"/>
            <Setter Property="Background" Value="#27AE60"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="BlueButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="35"/>
            <Setter Property="Background" Value="#3498DB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ListHeaderStyle" TargetType="GridViewColumnHeader">
            <Setter Property="Background" Value="#8B4513"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height" Value="30"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" Background="#8B4513" Padding="15" Margin="10,10,10,5" CornerRadius="5">
            <TextBlock Text="♞ ОНЛАЙН ИГРЫ" 
                      Foreground="White" FontSize="18" FontWeight="Bold" 
                      HorizontalAlignment="Center"/>
        </Border>

        <!-- Панель управления -->
        <Border Grid.Row="0" Background="#F5F5DC" Padding="10" Margin="10,5,10,10" CornerRadius="5">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="СОЗДАТЬ ИГРУ" 
                       Click="CreateGameButton_Click" 
                       Style="{StaticResource RoundedButtonStyle}"
                       Margin="5" Padding="15,0"/>

                <Button Content="ОБНОВИТЬ" 
                       Click="RefreshButton_Click" 
                       Style="{StaticResource BlueButtonStyle}"
                       Margin="5" Padding="15,0"/>

                <TextBlock Text="Режим:" 
                          VerticalAlignment="Center" 
                          Margin="10,0,5,0" 
                          FontWeight="Bold" 
                          Foreground="#333"/>

                <ComboBox x:Name="GameModeComboBox" 
                         Width="180" 
                         Height="30" 
                         Margin="5"
                         FontSize="12">
                    <ComboBoxItem Content="Человек vs Человек" IsSelected="True"/>
                    <ComboBoxItem Content="Человек vs AI"/>
                </ComboBox>
            </StackPanel>
        </Border>

        <!-- Список игр -->
        <Border Grid.Row="1" Background="#F5F5DC" Margin="10,5,10,10" CornerRadius="5" Padding="10">
            <ListView ItemsSource="{Binding ActiveGames}" 
                      SelectionChanged="GamesListView_SelectionChanged"
                      Background="Transparent"
                      BorderThickness="0">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ID" DisplayMemberBinding="{Binding Id}" Width="60">
                            <GridViewColumn.HeaderContainerStyle>
                                <Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource ListHeaderStyle}"/>
                            </GridViewColumn.HeaderContainerStyle>
                        </GridViewColumn>
                        <GridViewColumn Header="БЕЛЫЕ" DisplayMemberBinding="{Binding WhitePlayer.Username}" Width="120">
                            <GridViewColumn.HeaderContainerStyle>
                                <Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource ListHeaderStyle}"/>
                            </GridViewColumn.HeaderContainerStyle>
                        </GridViewColumn>
                        <GridViewColumn Header="ЧЁРНЫЕ" DisplayMemberBinding="{Binding BlackPlayer.Username}" Width="120">
                            <GridViewColumn.HeaderContainerStyle>
                                <Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource ListHeaderStyle}"/>
                            </GridViewColumn.HeaderContainerStyle>
                        </GridViewColumn>
                        <GridViewColumn Header="РЕЖИМ" DisplayMemberBinding="{Binding GameMode}" Width="110">
                            <GridViewColumn.HeaderContainerStyle>
                                <Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource ListHeaderStyle}"/>
                            </GridViewColumn.HeaderContainerStyle>
                        </GridViewColumn>
                        <GridViewColumn Header="ХОД" DisplayMemberBinding="{Binding CurrentPlayer}" Width="80">
                            <GridViewColumn.HeaderContainerStyle>
                                <Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource ListHeaderStyle}"/>
                            </GridViewColumn.HeaderContainerStyle>
                        </GridViewColumn>
                        <GridViewColumn Header="СОЗДАНА" DisplayMemberBinding="{Binding CreatedAt, StringFormat=dd.MM.yy HH:mm}" Width="100">
                            <GridViewColumn.HeaderContainerStyle>
                                <Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource ListHeaderStyle}"/>
                            </GridViewColumn.HeaderContainerStyle>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>

                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="Background" Value="White"/>
                        <Setter Property="Margin" Value="2"/>
                        <Setter Property="Padding" Value="8,5"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="BorderBrush" Value="#DDD"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#F0F8FF"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#E6F3FF"/>
                                <Setter Property="BorderBrush" Value="#3498DB"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
        </Border>

        <!-- Панель действий -->
        <Border Grid.Row="2" Background="#F5F5DC" Padding="10" Margin="10,5,10,10" CornerRadius="5">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="ПРИСОЕДИНИТЬСЯ" 
                       Click="JoinGameButton_Click" 
                       Style="{StaticResource GreenButtonStyle}"
                       Margin="5" Padding="15,0"/>

                <Button Content="НАБЛЮДАТЬ" 
                       Click="SpectateButton_Click" 
                       Style="{StaticResource BlueButtonStyle}"
                       Margin="5" Padding="15,0"/>

                <Button Content="НА ГЛАВНУЮ" 
                       Click="BackButton_Click" 
                       Style="{StaticResource RoundedButtonStyle}"
                       Margin="5" Padding="15,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>